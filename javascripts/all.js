$("#menu-close").click(function(t){t.preventDefault(),$("#sidebar-wrapper").toggleClass("active")}),$("#menu-toggle").click(function(t){t.preventDefault(),$("#sidebar-wrapper").toggleClass("active")}),$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html,body").animate({scrollTop:t.offset().top},1e3),!1}})}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};null==d3.chart&&(d3.chart={}),d3.chart.BaseChart=function(){function e(){this.draw=t(this.draw,this),null==this.accessors&&(this.accessors={}),this.accessors.width=100,this.accessors.height=100,this.accessors.margin={top:0,right:0,bottom:0,left:0},this.accessors.x_scale=d3.scale.linear(),this.accessors.y_scale=d3.scale.linear(),this.buildAccessors()}return e.prototype.buildAccessors=function(){var t,e,r,s;r=this.accessors,s=[];for(e in r)t=r[e],null==this[e]&&s.push(function(t){return function(e,r){return t[e]=function(t){return arguments.length?(r=t,this):r}}}(this)(e,t));return s},e.prototype.draw=function(t){var e;return e=this,t.each(function(t,r){return e._draw(this,t,r)})},e.prototype._draw=function(){throw"_draw not implemented!"},e}()}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Axes=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.x_axis=d3.svg.axis(),this.accessors.y_axis=d3.svg.axis(),this.accessors.x_title="x",this.accessors.y_title="y",r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t,e){var r,s,a,n,o,i,c,l,h,u;return n=this.x_scale(),h=this.y_scale(),r=this.x_axis(),i=this.y_axis(),o=this.x_title(),u=this.y_title(),r.scale(n).orient("bottom"),i.scale(h).orient("left"),c=d3.select(t).selectAll(".y.axis").data([e]),c.enter().append("g").classed("y axis",!0),c.call(i),s=d3.select(t).selectAll(".x.axis").data([e]),s.enter().append("g").classed("x axis",!0),s.attr("transform","translate(0, "+h.range()[0]+")").call(r),a=d3.select(t).select(".x.axis").selectAll("text.label").data([e]),a.enter().append("text").classed("label",!0),a.attr("x",n.range()[1]).attr("dy","2.49em").style("text-anchor","end").text(o),a.exit().remove(),l=d3.select(t).select(".y.axis").selectAll("text.label").data([e]),l.enter().append("text").classed("label",!0),l.attr("transform","rotate(-90)").style("text-anchor","end").attr("dy","1em").text(u),l.exit().remove(),s.exit().remove(),c.exit().remove()},r}(d3.chart.BaseChart)}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Image=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.original_width=0,this.accessors.original_height=0,this.accessors.color_value=function(t){return t.name},this.accessors.color_scale=d3.scale.linear(),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t,e){var r,s,a,n,o,i,c,l,h,u,p,d,g,f,_,y;for(y=this.width(),c=this.height(),g=this.original_width(),d=this.original_height(),p=this.margin(),n=this.color_value(),a=this.color_scale(),s=d3.select(t).selectAll("canvas").data([e]),i=s.enter().append("canvas"),s.attr("width",g).attr("height",d).style("width",y+"px").style("height",c+"px").style("margin-top",p.top+"px").style("margin-left",p.left+"px").style("margin-bottom",p.bottom+"px").style("margin-right",p.right+"px"),a.range(["white","black"]),o=s.node().getContext("2d"),l=o.createImageData(g,d),f=-1,h=0,u=e.length;u>h;h++)_=e[h],r=d3.rgb(a(n(_))),l.data[++f]=r.r,l.data[++f]=r.g,l.data[++f]=r.b,l.data[++f]=255;return o.imageSmoothingEnabled=!1,o.putImageData(l,0,0)},r}(d3.chart.BaseChart)}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Colorbar=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.color_scale=d3.scale.linear(),this.accessors.orient="vertical",this.accessors.origin={x:0,y:0},this.accessors.barlength=100,this.accessors.barthickness=50,r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t){var e,r,s,a,n,o,i,c,l,h,u,p,d,g,f,_,y,m,v,x,w,b;return c=this.color_scale(),g=this.margin(),f=this.orient(),_=this.origin(),s=this.barlength(),a=this.barthickness(),n=function(){var t;return t=c.copy(),t.range([0,1]),t.domain([1,10]),Math.abs((t(10)-t(1))/Math.log(10)-(t(10)-t(2))/Math.log(5))<1e-6?"log":Math.abs((t(10)-t(1))/9-(t(10)-t(2))/8)<1e-6?"linear":Math.abs((t(10)-t(1))/(Math.sqrt(10)-1)-(t(10)-t(2))/(Math.sqrt(10)-Math.sqrt(2)))<1e-6?"sqrt":"unknown"},v=n(),"horizontal"===f?(m=[g.left,g.right,g.top,g.bottom],g.top=m[0],g.bottom=m[1],g.left=m[2],g.right=m[3],w="height",d="width",e="bottom",y="x",r="translate (0, "+a+")"):(w="width",d="height",e="right",y="y",r="translate ("+a+", 0)"),x=d3.select(t).selectAll("svg.colorbar").data([_]),u=x.enter().append("svg").classed("colorbar",!0).append("g").classed("colorbar",!0),u.append("g").classed("legend",!0).classed("rect",!0),u.append("g").classed("axis",!0).classed("color",!0),x.attr(w,a+g.left+g.right).attr(d,s+g.top+g.bottom).style("margin-top",_.y-g.top+"px").style("margin-left",_.x-g.left+"px"),b=1e3,l=x.select("g").attr("transform","translate("+g.left+", "+g.top+")"),h=c.copy(),p=d3.range(0,s,s/(h.domain().length-1)),p.push(s),h.range(p.reverse()),i=l.select(".legend.rect").selectAll("rect").data(d3.range(0,s)),i.enter().append("rect").classed("legend",!0).style("opacity",1).style("stroke-thickness",0).transition().duration(b).attr(w,a).attr(d,2).attr(y,function(t){return t}).style("fill",function(t){return c(h.invert(t))}),i.exit().remove(),o=d3.svg.axis().scale(h).orient(e).ticks(5),l.selectAll(".color.axis").attr("transform",r).call(o)},r}(d3.chart.BaseChart)}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Bar=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.x_value=function(t){return t.x},this.accessors.y_value=function(t){return t.y},r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t,e){var r,s,a,n,o,i,c,l,h,u,p,d;return l=this.width(),o=this.height(),i=this.margin(),u=this.x_value(),d=this.y_value(),h=this.x_scale(),p=this.y_scale(),h.range([0,l]),p.range([o,0]),c=d3.select(t).selectAll("svg").data([e]),n=c.enter().append("svg").append("g"),c.attr("width",l+i.left+i.right).attr("height",o+i.top+i.bottom),a=c.select("g").attr("transform","translate("+i.left+", "+i.top+")"),a.selectAll("g.bars").data([e]).enter().append("g").classed("bars",!0),r=l/e.length,s=a.select("g.bars").selectAll("rect").data(function(t){return t}),s.enter().append("rect").classed("bar",!0),s.attr("x",function(t){return h(u(t))}).attr("y",function(t){return p(d(t))}).attr("width",r).attr("height",function(t){return o-p(d(t))}),s.exit().remove()},r}(d3.chart.BaseChart)}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Scatter=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.radius=3,this.accessors.x_value=function(t){return t.x},this.accessors.y_value=function(t){return t.y},this.accessors.color_value=function(t){return t.name},this.accessors.color_scale=d3.scale.category20(),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t,e){var r,s,a,n,o,i,c,l,h,u,p,d,g,f,_;return p=this.width(),c=this.height(),l=this.margin(),h=this.radius(),g=this.x_value(),_=this.y_value(),d=this.x_scale(),f=this.y_scale(),n=this.color_value(),a=this.color_scale(),s=e.map(n).filter(function(t,e,r){return r.indexOf(t===e)}),a.domain(s),d.range([0,p]),f.range([c,0]),u=d3.select(this).selectAll("svg").data([e]),i=u.enter().append("svg").append("g"),u.attr("width",p+l.left+l.right).attr("height",c+l.top+l.bottom),o=u.select("g").attr("transform","translate("+l.left+", "+l.top+")"),o.selectAll(".circles").data([e]).enter().append("g").classed("circles",!0),r=o.select(".circles").selectAll(".circle").data(function(t){return t}),r.enter().append("circle").classed("circle",!0),r.attr("r",h).attr("cx",function(t){return d(g(t))}).attr("cy",function(t){return f(_(t))}).style("fill",function(t){return a(n(t))}),r.exit().remove()},r}(d3.chart.BaseChart)}.call(this),function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Line=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.interpolation="linear",this.accessors.x_value=function(t){return t.x},this.accessors.y_value=function(t){return t.y},this.accessors.color_value=function(t){return t.name},this.accessors.color_scale=d3.scale.category20(),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t,e){var r,s,a,n,o,i,c,l,h,u,p,d,g,f,_;return p=this.width(),i=this.height(),h=this.margin(),c=this.interpolation(),g=this.x_value(),_=this.y_value(),d=this.x_scale(),f=this.y_scale(),a=this.color_value(),s=this.color_scale(),r=e.map(a).filter(function(t,e,r){return r.indexOf(t===e)}),s.domain(r),d.range([0,p]),f.range([i,0]),u=d3.select(t).selectAll("svg").data([e]),o=u.enter().append("svg").append("g"),u.attr("width",p+h.left+h.right).attr("height",i+h.top+h.bottom),n=u.select("g").attr("transform","translate("+h.left+", "+h.top+")"),n.selectAll(".paths").data([e]).enter().append("g").classed("paths",!0),l=n.select(".paths").selectAll(".path").data(function(t){return t}),l.enter().append("path").classed("path",!0),l.attr("stroke",function(t){return s(t.name)}).attr("d",function(t){return d3.svg.line().interpolate(c).x(function(t){return d(g(t))}).y(function(t){return f(_(t))})(t.values)}),l.exit().remove()},r}(d3.chart.BaseChart)}.call(this),function(){$(function(){var t;return t="data/S00044_S00063.csv",d3.csv(t,function(t){return{row:parseInt(t.row),pixel:parseInt(t.pixel),absorption:t.A,darkfield:t.B,ratio:t.R}},function(t,e){var r;if(null==t)return r=function(t,r){var s,a,n,o,i,c,l,h,u,p;return c=d3.max(e,function(t){return t.pixel}),i=d3.max(e,function(t){return t.row}),p=$(t).width(),a=.618,n=p*a,o=(new d3.chart.Image).width(p).height(n).original_width(c).original_height(i).color_value(function(t){return t[r]}).margin({bottom:0,left:0,top:0,right:0}),s=(new d3.chart.Colorbar).orient("horizontal").color_scale(o.color_scale()).barlength(o.width()).barthickness(.1*o.height()).margin({bottom:.2*o.height(),left:0,top:0,right:0}),u=e.map(o.color_value()).sort(d3.ascending),h=d3.quantile(u,.05),l=d3.quantile(u,.95),o.color_scale().domain([h,l]).nice(),d3.select(t).datum(e).call(o.draw),d3.select(t).datum([0]).call(s.draw)},r("#absorption-image","absorption"),r("#darkfield-image","darkfield"),r("#ratio-image","ratio")})})}.call(this);