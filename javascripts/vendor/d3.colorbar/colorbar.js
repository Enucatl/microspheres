(function(){var t=function(t,r){function s(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return s.prototype=r.prototype,t.prototype=new s,t.__super__=r.prototype,t},e={}.hasOwnProperty;d3.chart.Colorbar=function(e){function r(){null==this.accessors&&(this.accessors={}),this.accessors.color_scale=d3.scale.linear(),this.accessors.orient="vertical",this.accessors.origin={x:0,y:0},this.accessors.barlength=100,this.accessors.barthickness=50,r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._draw=function(t){var e,r,s,a,o,n,l,c,i,h,p,g,d,u,f,y,b,m,v,_,x,M;return c=this.color_scale(),u=this.margin(),f=this.orient(),y=this.origin(),s=this.barlength(),a=this.barthickness(),o=function(){var t;return t=c.copy(),t.range([0,1]),t.domain([1,10]),Math.abs((t(10)-t(1))/Math.log(10)-(t(10)-t(2))/Math.log(5))<1e-6?"log":Math.abs((t(10)-t(1))/9-(t(10)-t(2))/8)<1e-6?"linear":Math.abs((t(10)-t(1))/(Math.sqrt(10)-1)-(t(10)-t(2))/(Math.sqrt(10)-Math.sqrt(2)))<1e-6?"sqrt":"unknown"},v=o(),"horizontal"===f?(m=[u.left,u.right,u.top,u.bottom],u.top=m[0],u.bottom=m[1],u.left=m[2],u.right=m[3],x="height",d="width",e="bottom",b="x",r="translate (0, "+a+")"):(x="width",d="height",e="right",b="y",r="translate ("+a+", 0)"),_=d3.select(t).selectAll("svg.colorbar").data([y]),p=_.enter().append("svg").classed("colorbar",!0).append("g").classed("colorbar",!0),p.append("g").classed("legend",!0).classed("rect",!0),p.append("g").classed("axis",!0).classed("color",!0),_.attr(x,a+u.left+u.right).attr(d,s+u.top+u.bottom).style("margin-top",y.y-u.top+"px").style("margin-left",y.x-u.left+"px"),M=1e3,i=_.select("g").attr("transform","translate("+u.left+", "+u.top+")"),h=c.copy(),g=d3.range(0,s,s/(h.domain().length-1)),g.push(s),h.range(g.reverse()),l=i.select(".legend.rect").selectAll("rect").data(d3.range(0,s)),l.enter().append("rect").classed("legend",!0).style("opacity",1).style("stroke-thickness",0).transition().duration(M).attr(x,a).attr(d,2).attr(b,function(t){return t}).style("fill",function(t){return c(h.invert(t))}),l.exit().remove(),n=d3.svg.axis().scale(h).orient(e).ticks(5),i.selectAll(".color.axis").attr("transform",r).call(n)},r}(d3.chart.BaseChart)}).call(this);