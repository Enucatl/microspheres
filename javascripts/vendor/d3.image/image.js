(function(){var t=function(t,e){function r(){this.constructor=t}for(var s in e)a.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;d3.chart.Image=function(a){function e(){null==this.accessors&&(this.accessors={}),this.accessors.original_width=0,this.accessors.original_height=0,this.accessors.color_value=function(t){return t.name},this.accessors.color_scale=d3.scale.linear(),e.__super__.constructor.apply(this,arguments)}return t(e,a),e.prototype._draw=function(t,a){var e,r,s,i,o,n,c,h,l,g,p,d,u,_,m,y;for(y=this.width(),c=this.height(),u=this.original_width(),d=this.original_height(),p=this.margin(),i=this.color_value(),s=this.color_scale(),r=d3.select(t).selectAll("canvas").data([a]),n=r.enter().append("canvas"),r.attr("width",u).attr("height",d).style("width",y+"px").style("height",c+"px").style("margin-top",p.top+"px").style("margin-left",p.left+"px").style("margin-bottom",p.bottom+"px").style("margin-right",p.right+"px"),s.range(["white","black"]),o=r.node().getContext("2d"),h=o.createImageData(u,d),_=-1,l=0,g=a.length;g>l;l++)m=a[l],e=d3.rgb(s(i(m))),h.data[++_]=e.r,h.data[++_]=e.g,h.data[++_]=e.b,h.data[++_]=255;return o.imageSmoothingEnabled=!1,o.putImageData(h,0,0)},e}(d3.chart.BaseChart)}).call(this);